var p=Object.defineProperty;var u=(a,e,t)=>e in a?p(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>(u(a,typeof e!="symbol"?e+"":e,t),t);import{C as r,a as C,L as g,b as m,P as b,p as y,c as f,d as I,A as E,e as w,f as R,B as A,g as L,i as B,h as T}from"./totalGlobalOrMonthly-73ab2a1f.js";import"./config-abee4849.js";r.register(C,g,m,b,y,f,I,E,w,R,A,L);class ${constructor(){s(this,"lineChartInstance",null);s(this,"pieChartInstance",null);s(this,"ctxLine",document.getElementById("monthly-line-chart"));s(this,"ctxPie",document.getElementById("monthly-pie-chart"));s(this,"updateTimer",null);B(),this.refreshAndRenderCharts(),window.addEventListener("dataChanged",async e=>{this.updateTimer&&window.clearTimeout(this.updateTimer),this.updateTimer=window.setTimeout(()=>{this.refreshAndRenderCharts().catch(console.error)},100)})}async refreshAndRenderCharts(){const{incomeResultFilter:e,expenseResultFilter:t}=await T();this.lineChartInstance?(this.lineChartInstance.data.datasets[0].data=[e,t],this.lineChartInstance.update()):this.lineChartInstance=new r(this.ctxLine,{type:"bar",data:{labels:["Receitas","Despesas"],datasets:[{data:[e,t],borderWidth:2,borderColor:"transparent",backgroundColor:["rgb(37, 154, 103)","rgba(216, 60, 60, 1)"]}]},options:{responsive:!0,plugins:{title:{display:!0,font:{size:18}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(n){return`R$ ${n}`}}}}}}),this.pieChartInstance?(this.pieChartInstance.data.datasets[0].data=[e,t],this.pieChartInstance.update()):this.pieChartInstance=new r(this.ctxPie,{type:"pie",data:{labels:["Receitas","Despesas"],datasets:[{data:[e,t],backgroundColor:["rgb(37, 154, 103)","rgba(216, 60, 60, 1)"],borderWidth:2,borderColor:"#E5E7EB"}]},options:{responsive:!1,plugins:{title:{display:!0,font:{size:18}},legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(n){const i=n.label||"",l=n.parsed,o=n.dataset.data.reduce((c,h)=>c+h,0),d=(l/o*100).toFixed(1);return`${i}: ${d}%`}}}}}})}}export{$ as ManagerChartMonthly};
