var u=Object.defineProperty;var g=(a,e,t)=>e in a?u(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>(g(a,typeof e!="symbol"?e+"":e,t),t);import{C as r,a as C,L as b,b as m,P as f,p as I,c as y,d as E,A as w,e as R,f as A,B as L,g as B,t as i,h as T}from"./totalGlobalOrMonthly-73ab2a1f.js";import"./config-abee4849.js";r.register(C,b,m,f,I,y,E,w,R,A,L,B);class ${constructor(){s(this,"lineChartInstance",null);s(this,"pieChartInstance",null);s(this,"ctxLine",document.getElementById("global-line-chart"));s(this,"ctxPie",document.getElementById("global-pie-chart"));s(this,"updateTimer",null);i(),this.refreshAndRenderCharts(),window.addEventListener("dataChanged",async e=>{this.updateTimer&&window.clearTimeout(this.updateTimer),this.updateTimer=window.setTimeout(()=>{i(),this.refreshAndRenderCharts().catch(console.error)},100)})}async refreshAndRenderCharts(){const{incomeResult:e,expenseResult:t}=await T();this.lineChartInstance?(this.lineChartInstance.data.datasets[0].data=[e,t],this.lineChartInstance.update()):this.lineChartInstance=new r(this.ctxLine,{type:"bar",data:{labels:["Receitas","Despesas"],datasets:[{data:[e,t],borderWidth:2,borderColor:"transparent",backgroundColor:["rgb(37, 154, 103)","rgba(216, 60, 60, 1)"]}]},options:{responsive:!0,plugins:{title:{display:!0,font:{size:18}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(n){return`R$ ${n}`}}}}}}),this.pieChartInstance?(this.pieChartInstance.data.datasets[0].data=[e,t],this.pieChartInstance.update()):this.pieChartInstance=new r(this.ctxPie,{type:"pie",data:{labels:["Receitas","Despesas"],datasets:[{data:[3500,430],backgroundColor:["rgb(37, 154, 103)","rgba(216, 60, 60, 1)"],borderWidth:2,borderColor:"#E5E7EB"}]},options:{responsive:!1,plugins:{title:{display:!0,font:{size:18}},legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(n){const l=n.label||"",o=n.parsed,d=n.dataset.data.reduce((p,h)=>p+h,0),c=(o/d*100).toFixed(1);return`${l}: ${c}%`}}}}}})}}export{$ as ManagerChartGlobal};
