var D=Object.defineProperty;var H=(n,t,e)=>t in n?D(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>(H(n,typeof t!="symbol"?t+"":t,e),e);import{b as $}from"./config-abee4849.js";const{Axios:J,AxiosError:W,CanceledError:N,isCancel:Q,CancelToken:X,VERSION:Z,all:_,Cancel:ee,isAxiosError:te,spread:ne,toFormData:ae,AxiosHeaders:le,HttpStatusCode:se,formToJSON:ce,getAdapter:oe,mergeConfig:ie}=$;function re(n,t,e){var c,l;k(t);const a=(l=(c=n.response)==null?void 0:c.data)==null?void 0:l.errors,s={valor:f(a,"valor"),categoria:f(a,"categoria"),descricao:f(a,"descrição"),data:f(a,"data")};t.querySelectorAll(".input-container").forEach(r=>{const i=r.querySelector("input, select"),p=(i==null?void 0:i.getAttribute("name"))||(i==null?void 0:i.getAttribute("id"))||"";let m="";if(p.includes("value")?m=s.valor||"":p.includes("category")?m=s.categoria||"":p.includes("desc")?m=s.descricao||"":p.includes("date")&&(m=s.data||""),m){let d=r.querySelector(".error-paragraph");d||(d=document.createElement("p"),d.className="error-paragraph",d.style.marginTop="5px",d.style.fontSize="10pt",d.style.color="#D4002F",r.appendChild(d)),d.textContent=m}if(m&&!r.querySelector(".input-icon")){i==null||i.classList.add("error");const d=document.createElement("i");d.className="bi bi-x-circle input-icon",r.appendChild(d)}}),t.style.display="flex",e.style.display="flex"}function f(n,t){return n.find(a=>a.toLowerCase().includes(t.toLowerCase()))||null}function k(n){n.querySelectorAll("input, select").forEach(s=>{s.classList.remove("error")}),n.querySelectorAll("p").forEach(s=>s.remove()),n.querySelectorAll("i").forEach(s=>s.remove())}function de(n){let t=document.querySelector(".modal");t||(t=document.createElement("div"),t.className="modal",document.body.appendChild(t)),t.innerHTML=`
        <i class="bi bi-check2-circle"></i> ${n}
    `,t.classList.add("active"),setTimeout(()=>{t.classList.remove("active")},3500)}function V(n){const t=document.querySelector(".top-alert");t&&t.remove();const e=document.createElement("div");e.className="top-alert",e.textContent=n,document.body.appendChild(e),requestAnimationFrame(()=>{e.classList.add("show")}),setTimeout(()=>{e.classList.remove("show"),setTimeout(()=>e.remove(),300)},3500)}function ue(n,t,e,a,s){let o,c,l,r;const i=e.classList.contains("new-income");i?(o=document.getElementById("new-inc-value"),c=document.getElementById("new-inc-category"),l=document.getElementById("new-inc-description"),r=document.getElementById("new-inc-date")):(o=document.getElementById("new-exp-value"),c=document.getElementById("new-exp-category"),l=document.getElementById("new-exp-desc"),r=document.getElementById("new-exp-date")),t.onclick=()=>{e.style.display="flex",a.style.display="flex",o.value="",c.value="select",l.value="",r.value=""},e.querySelector(i?".cancel-income":".cancel-expense").addEventListener("click",()=>{e.style.display="none",a.style.display="none",o.value="",c.value="select",l.value="",r.value="",k(e)}),n.addEventListener("click",m=>{m.preventDefault();const d={valor:o.value,categoria:c.value,descricao:l.value||"",data:r.value};e.style.display="none",a.style.display="none",s(d)})}function K(n,t){t.innerHTML="",n.forEach(e=>{t.innerHTML+=`
            <div class="items">
                <div class="value">
                    <h2>+R$ ${e.valor}</h2>
                    <div class="tags">
                        <p><span>${e.categoria}</span></p>
                        <p>${e.descricao}</p>
                    </div>
                </div>
        
                <div class="edit">
                    <p class="date">${e.data}</p>
                    <button class="btn-edit"><i class="bi bi-pencil-square"></i> Editar</button>
                    <button class="btn-delete"><i class="bi bi-trash3"></i> Excluir</button>
                </div>
            </div>
        `})}function me(n,t="income"){const e=t==="income",a=document.getElementById(e?"inc-category":"exp-category"),s=document.getElementById(e?"inc-monthYear":"exp-monthYear"),o=()=>{const c=a.value||void 0,l=s.value||void 0;n(c,l)};a.addEventListener("change",o),s.addEventListener("change",o)}function pe(n,t,e,a,s){const o=t.querySelectorAll(".items");let c,l,r,i;const p=e.classList.contains("new-income");p?(c=document.getElementById("new-inc-value"),l=document.getElementById("new-inc-category"),r=document.getElementById("new-inc-description"),i=document.getElementById("new-inc-date")):(c=document.getElementById("new-exp-value"),l=document.getElementById("new-exp-category"),r=document.getElementById("new-exp-desc"),i=document.getElementById("new-exp-date")),o.forEach((m,d)=>{m.querySelector(".btn-edit").addEventListener("click",F=>{F.preventDefault();const v=e.querySelector(p?".update-income":".update-expense");v.style.display="block";const S=e.querySelector(p?".create-income":".create-expense");S.style.display="none",e.style.display="flex",a.style.display="flex";const g={valor:c.value=n[d].valor,categoria:l.value=n[d].categoria,descricao:r.value=n[d].descricao||"",data:i.value=n[d].data.split("/").reverse().join("-")};v.onclick=P=>{if(!(g.valor!==c.value||g.categoria!==l.value||g.descricao!==(r.value||"")||g.data!==i.value)&&v){V("Por favor altere algum campo para poder prosseguir com a atualização.");return}const T={valor:c.value,categoria:l.value,descricao:r.value||"",data:i.value};e.style.display="none",a.style.display="none",v.style.display="none",S.style.display="block",s(d,T)};const M=e.querySelector(p?".cancel-income":".cancel-expense");M.onclick=()=>{v.style.display="none",S.style.display="block"}})})}function ye(n,t){n.querySelectorAll(".items").forEach((a,s)=>{a.querySelector(".btn-delete").addEventListener("click",()=>{const c=a.querySelector(".delete-confirmation");if(c){c.remove();return}const l=document.createElement("div");l.className="delete-confirmation show",l.innerHTML=`
                <div class="delete-content">
                    <i class="bi bi-exclamation-triangle"></i>
                    <p>Você tem certeza que deseja excluir?</p>
                    <div class="delete-actions">
                        <button class="btn-confirm">Excluir</button>
                        <button class="btn-cancel">Cancelar</button>
                    </div>
                </div>
            `,a.appendChild(l);const r=l.querySelector(".btn-cancel"),i=l.querySelector(".btn-confirm");r==null||r.addEventListener("click",()=>{l.remove()}),i==null||i.addEventListener("click",()=>{t(s),l.remove()})})})}function O(n,t){t.innerHTML="",t.innerHTML+=`
        <div class="not-item">
            <h3>${n}</h3>
        </div>
    `}let I="income",L,h,E,b,u=1,x=0,q=5;function U(n){I=n,n==="income"?(L=document.querySelector(".pagination-income"),E=document.querySelector(".btn-next-income"),b=document.querySelector(".btn-prev-income")):(L=document.querySelector(".pagination-expense"),E=document.querySelector(".btn-next-expense"),b=document.querySelector(".btn-prev-expense")),h=L.querySelector("ul")}function z(n,t,e,a="income"){return U(a),u=n,x=t,q=e,E.removeEventListener("click",w),b.removeEventListener("click",B),E.addEventListener("click",w),b.addEventListener("click",B),C(t,n),A(n),(n-1)*e}function w(){if(u<x){u++;const n=(u-1)*q;C(x,u),A(u),window.dispatchEvent(new CustomEvent("pageChanged",{detail:{page:u,skip:n,context:I}}))}}function B(){if(u>1){u--;const n=(u-1)*q;C(x,u),A(u),window.dispatchEvent(new CustomEvent("pageChanged",{detail:{page:u,skip:n,context:I}}))}}function C(n,t){h.innerHTML="";const e=3;let a;t===1?a=1:t===n?a=Math.max(1,n-2):a=Math.max(1,t-1);const s=Math.min(n,a+e-1);s-a+1<e&&n>=e&&(a=Math.max(1,s-e+1));for(let o=a;o<=s;o++)h.innerHTML+=`
            <li value=${o}>${o}</li>
        `}function A(n,t){const e=h.querySelectorAll("li");e.forEach(a=>a.classList.remove("active")),e.forEach(a=>{a.getAttribute("value")===String(n)&&a.classList.add("active")})}class ve{constructor(t,e,a,s,o,c,l){y(this,"isFiltering",!1);y(this,"currentFilter",null);y(this,"divItems");y(this,"updateCurrentData");y(this,"setupDeleteListener");y(this,"setupUpdateListener");y(this,"getAllItems");y(this,"apiService");y(this,"dataKey");this.divItems=t,this.updateCurrentData=e,this.setupDeleteListener=a,this.setupUpdateListener=s,this.getAllItems=o,this.apiService=c,this.dataKey=l}async applyFilter(t,e,a,s){try{const o={...t,skip:a,perPage:s},c=this.dataKey==="incomes"?"filterIncome":"filterExpense",l=await this.apiService[c](o);this.updateCurrentData({...l,fetchedAt:new Date().toISOString(),page:e,skip:a});const r=l.pages||1,i=this.dataKey==="incomes"?"income":"expense";return z(e,r,s,i),K(l[this.dataKey],this.divItems),this.setupDeleteListener(),this.setupUpdateListener(),l}catch(o){console.log("Erro ao aplicar filtro: ",o);const c=this.dataKey==="incomes"?"receita":"despesa";throw O(`Nenhuma ${c} encontrada.`,this.divItems),o}}clearFilter(){this.isFiltering=!1,this.currentFilter=null,this.getAllItems()}setFilterState(t,e){this.isFiltering=!0,this.currentFilter={category:t,date:e}}}export{W as A,ve as F,me as a,k as b,ue as c,ye as d,re as f,K as l,de as m,O as n,z as p,pe as u};
